- provide(:title, t('registrations.title.edit'))

%h2
  = t('registrations.title.edit')

.row.vert-offset-top-2
  = simple_nested_form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f|
    = render 'shared/error_messages', object: f.object

    .row.form-inputs
      .col-xs-12.col-sm-6
        - if f.object.photo.present?
          = image_tag "/people/show_photo/standart/#{f.object.id}", class: 'img-thumbnail'
        - else
          = image_tag f.object.photo_url, class: 'img-thumbnail'
        = f.input :photo, wrapper: :vertical_file_input, as: :file
        = f.input :photo_cache, as: :hidden
        - if f.object.passport.present?
          = link_to 'Show passport', "/people/show_passport/#{f.object.id}", target: '_blank'
        - else
          There is no passport attached.
        = f.input :passport, wrapper: :vertical_file_input, as: :file
        = f.input :passport_cache, as: :hidden
      .col-xs-12.col-sm-6
        = f.input :email, required: true, autofocus: true
        = f.input :spiritual_name
        = f.input :name, required: true
        = f.input :middle_name
        = f.input :surname, required: true
      .col-xs-12.col-sm-6
        = render 'shared/nested_telephones', f: f
        = f.input :gender, collection: [[:male, true], [:female, false]], required: true,
                           label_method: lambda { |element| t("simple_form.options.person.gender.#{element.first}") }
        = f.input :birthday, as: :string, input_html: { id: 'datepicker', data: { locale: "#{locale}" } }
        = f.input :education
        = f.input :work
        = f.input :emergency_contact

        - if devise_mapping.confirmable? && resource.pending_reconfirmation?
          %p
            Currently waiting confirmation for: #{resource.unconfirmed_email}

        = f.input :password, autocomplete: 'off', required: false
        = f.input :password_confirmation, required: false
        = f.input :current_password, required: true

    .row.form-actions
      .col-xs-12.col-sm-6
        = f.button :submit, t('devise.links.update'), class: 'btn-lg'

.row.vert-offset-top-2
  = link_to t('devise.links.delete'), registration_path(resource_name), class: 'btn btn-danger',
                                      data: { confirm: t('devise.links.confirmations.delete') }, method: :delete
